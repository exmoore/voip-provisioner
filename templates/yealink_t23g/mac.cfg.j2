#!version:1.0.0.1
## Yealink T23G Configuration
## Generated by VOIP Provisioner
## MAC: {{ mac | format_mac }}
## Extension: {{ extension }}

#######################
## Account Settings
#######################
account.1.enable = 1
account.1.label = {{ label }}
account.1.display_name = {{ display_name }}
account.1.auth_name = {{ extension }}
account.1.user_name = {{ extension }}
account.1.password = {{ password }}

## SIP Server
account.1.sip_server.1.address = {{ pbx_server }}
account.1.sip_server.1.port = {{ pbx_port }}
account.1.sip_server.1.transport_type = {% if transport == "UDP" %}0{% elif transport == "TCP" %}1{% elif transport == "TLS" %}2{% else %}0{% endif %}

account.1.sip_server.1.expires = 3600
account.1.sip_server.1.retry_counts = 3

## Outbound Proxy (same as SIP server for simple setups)
account.1.outbound_proxy_enable = 0

## NAT settings
account.1.nat.nat_traversal = 0
account.1.nat.rport = 0

#######################
## Codec Settings
#######################
{% for codec in codecs %}
account.1.codec.{{ loop.index }}.enable = 1
account.1.codec.{{ loop.index }}.payload_type = {% if codec == "PCMU" %}PCMU{% elif codec == "PCMA" %}PCMA{% elif codec == "G722" %}G722{% elif codec == "G729" %}G729{% else %}{{ codec }}{% endif %}

account.1.codec.{{ loop.index }}.priority = {{ loop.index }}
{% endfor %}

#######################
## Phone Settings
#######################
## Time & Date
local_time.ntp_server1 = {{ ntp_server }}
local_time.time_zone = {{ timezone }}
local_time.time_zone_name = {{ timezone }}
local_time.summer_time = 2
local_time.ntp_type = 0
local_time.dhcp_time = 0

## Display
phone_setting.lcd_logo.mode = 1
phone_setting.lcd_logo.text = {{ display_name }}

## Network (DHCP by default)
network.dhcp_enable = 1

#######################
## Features
#######################
## Voicemail
voice_mail.number.1 = *97

## Auto Answer (disabled)
account.1.auto_answer = 0

## Call Waiting
call_waiting.enable = 1

## Do Not Disturb (disabled)
dnd.mode = 0

#######################
## Remote Phonebook
#######################
remote_phonebook.1.url = http://{{ pbx_server }}:8080/phonebook.xml
remote_phonebook.1.name = Directory

#######################
## Security
#######################
## Disable unused accounts
account.2.enable = 0
account.3.enable = 0

## Web interface
web_server.type = 0

#######################
## Provisioning
#######################
## Re-provision on boot
auto_provision.mode = 0
auto_provision.repeat.enable = 0
